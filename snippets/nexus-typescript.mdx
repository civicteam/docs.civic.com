```
# Civic Nexus Integration Prompt (TypeScript)

## Task
Integrate Civic Nexus with an AI SDK in this TypeScript/JavaScript application.

## Step 1: Analyze Project & Gather Information

**First, check the project:**
1. Read `package.json` to see what's installed:
   - Look for `ai` package → User likely wants Vercel AI SDK
   - Look for `@openai/agents` → User wants OpenAI Agents SDK
   - Look for `@anthropic-ai/sdk` → User wants Anthropic Messages API
   - Check for `next` → It's a Next.js project
   - Check for other frameworks (Express, Hono, etc.)

2. Check existing files to confirm:
   - Look for imports of `ai`, `@ai-sdk/openai`, etc. → Vercel AI SDK
   - Look for imports of `@openai/agents` → OpenAI Agents SDK
   - Look for imports of `@anthropic-ai/sdk` or `Anthropic` → Anthropic Messages API

**Then ask the user:**
1. **Confirm the AI SDK**: "I see you're using [detected SDK]. Is that correct, or would you like to use a different one?"
   - If nothing detected, ask: "Which AI SDK do you want to use: Vercel AI SDK, OpenAI Agents SDK, or Anthropic Messages API?"
2. **Get their Civic Auth Client ID**: "What is your Civic Auth Client ID? (Get it from https://auth.civic.com)"

## Step 2: Find the Recipe
Navigate to https://docs.civic.com, search for "Nexus", then navigate to Recipes:
- If user chose **Vercel AI SDK** → Find and read "Vercel AI SDK" recipe
- If user chose **OpenAI Agents SDK** → Find and read "OpenAI Agents SDK" recipe
- If user chose **Anthropic Messages API** → Find and read "Anthropic Messages API" recipe

Read the complete recipe and follow all the steps exactly as written.

## Step 3: Set Up Environment
Tell the user to create `.env.local` with:
```bash
CIVIC_AUTH_CLIENT_ID=their_client_id_from_step1
# Tell them to add their AI provider key:
OPENAI_API_KEY=xxx  # or ANTHROPIC_API_KEY=xxx
```

## Step 4: Follow the Recipe
Implement exactly what the recipe shows:
- Install the packages listed
- Set up Civic Auth as shown
- Implement the integration code
- For Next.js: Put middleware.ts in src/ directory

**IMPORTANT for Next.js Middleware**: Pay close attention to the middleware wrapping pattern in the Civic Auth docs. Use `auth()` to create a wrapper, then wrap your custom middleware function with it. Don't forget to define public routes and handle redirects with callback URLs.

## Step 5: Test
Guide them to:
1. Run dev server
2. Test with "list my GitHub repos"

## Important
- Get their Client ID upfront
- Never ask for API keys - tell them to add to .env.local
- Follow the recipe exactly
- The recipe has all the details
```
